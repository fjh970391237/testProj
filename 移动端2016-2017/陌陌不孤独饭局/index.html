<!DOCTYPE html>
<html class=" js-no-overflow-scrolling">
<head>
<meta charset="utf-8">
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
<title>不孤独饭局</title>
<link rel="stylesheet" type="text/css" href="css/H5FullscreenPage.css">
<link rel="stylesheet" type="text/css" href="css/page-animation.css">
<link rel="stylesheet" type="text/css" href="index.css">

</head>
<body>
<div class="donghua"></div>
<div class="page p0">
    <div class="p0-loading"></div>
    <div class="p0-hungry"> 好…饿…啊… </div>
    <div class="hungry-shadow"></div>
</div>

<div class="page p1 hide">
    <img class="p1-camera" src="images/camera.png" />
    <div class="p1-rect"></div>
    <img src="images/p1-time.png" class="p1-time" />
    <div class="p1-msg msg01 msg hide">
        <div class="p1-name"> 小白<span class="p1-msg-time">1分钟前</span></div>
        <div class="p1-msg-con"> 你自己吃吧，我不想出门。 </div>
    </div>
    <div class="p1-msg msg02 msg hide">
        <div class="p1-name"> 花花<span class="p1-msg-time">4分钟前</span></div>
        <div class="p1-msg-con"> 不能陪你吃啦，我吃不习惯那个啊~我先睡啦。 </div>
    </div>
    <div class="p1-msg msg-momo momo hide">
        <div class="p1-name"> 陌陌<span class="p1-msg-time">5分钟前</span></div>
        <div class="p1-msg-con"> 饥饿难耐却只能看着冰箱发呆？太晚找不到人陪、口味不对、懒得出门等都不再是将就的理由！陌陌“不孤独饭局”在这等着你。 </div>
    </div>
</div>
<div class="page p2 hide">
    <div class="p2animate"></div>
    <div class="goOn goOn01"></div>
    <div class="goOn goOn02"></div>
    <div class="goOn goOn03"></div>
    <div class="goOn jumpTip"></div>
    <div class="p2-text hide"></div>
    <div class="p2-end hide">
        <img src="images/fridge-text.png" class="fridge-text"  />
        <img src="images/choice-close.png" class="choice-close"  />
    </div>
</div>

<div class="page p3 hide">
    
    <div class="p3-floor floor1">
        <div class="floor-con con1">
            <img src="images/floor1-name.png" class="floor-name">
            <div class="floor-text">
                <p><span class="theme">#晒冰箱换宵夜 </span> <span class="theme-con">囤了很多绝版胶卷，想给她拍照的。她走了，胶卷留下了，之前她不准我吃宵夜说会胖，而现在我想找个人陪我吃点什么都找不到了。</span></p>
            </div>
            <img src="images/f-pic1.jpg" class="floor-pic">
            <div class="floor-footer">
                <span class="distance">0.30km</span>
                <span class="discuss-num">2评论</span>
                <span class="read-num">10阅读</span>
                <img class="discuss-write" src="images/comment.png" />
            </div>
        </div>
    </div>

    <div class="p3-floor floor2">
        <div class="floor-con con2">
            <img src="images/floor2-name.png" class="floor-name">
            <div class="floor-text">
                <p><span class="theme">#晒冰箱换宵夜 </span> <span class="theme-con">囤了很多绝版胶卷，想给她拍照的。她走了，胶卷留下了，之前她不准我吃宵夜说会胖，而现在我想找个人陪我吃点什么都找不到了。</span></p>
            </div>
            <img src="images/f-pic2.jpg" class="floor-pic">
            <div class="floor-footer">
                <span class="distance">0.30km</span>
                <span class="discuss-num">2评论</span>
                <span class="read-num">10阅读</span>
                <img class="discuss-write" src="images/comment.png" />
            </div>
        </div>
    </div>

    <div class="p3-floor floor3">
        <div class="floor-con con3">
            <img src="images/floor3-head.gif" class="con3-head">
            <img src="images/floor3-name.png" class="floor-name">
            <div class="floor-text">
                <p><span class="theme">#晒冰箱换宵夜 </span> <span class="theme-con">囤了很多绝版胶卷，想给她拍照的。她走了，胶卷留下了，之前她不准我吃宵夜说会胖，而现在我想找个人陪我吃点什么都找不到了。</span></p>
            </div>
            <img src="images/f-pic3.jpg" class="floor-pic">
            <div class="floor-footer">
                <span class="distance">0.30km</span>
                <span class="discuss-num">2评论</span>
                <span class="read-num">10阅读</span>
                <img class="discuss-write" src="images/comment.png" />
            </div>
        </div>
    </div>

    <div class="p3-floor floor4">
        <div class="floor-con con4">
            <img src="images/floor4-name.png" class="floor-name">
            <div class="floor-text">
                <p><span class="theme">#晒冰箱换宵夜 </span> <span class="theme-con">囤了很多绝版胶卷，想给她拍照的。她走了，胶卷留下了，之前她不准我吃宵夜说会胖，而现在我想找个人陪我吃点什么都找不到了。</span></p>
            </div>
            <img src="images/f-pic4.jpg" class="floor-pic">
            <div class="floor-footer">
                <span class="distance">0.30km</span>
                <span class="discuss-num">2评论</span>
                <span class="read-num">10阅读</span>
                <img class="discuss-write" src="images/comment.png" />
            </div>
        </div>
    </div>

    <div class="p3-floor floor5">
        <div class="floor-con con5">
            <img src="images/floor5-name.png" class="floor-name">
            <div class="floor-text">
                <p><span class="theme">#晒冰箱换宵夜 </span> <span class="theme-con">囤了很多绝版胶卷，想给她拍照的。她走了，胶卷留下了，之前她不准我吃宵夜说会胖，而现在我想找个人陪我吃点什么都找不到了。</span></p>
            </div>
            <img src="images/f-pic5.jpg" class="floor-pic">
            <div class="floor-footer">
                <span class="distance">0.30km</span>
                <span class="discuss-num">2评论</span>
                <span class="read-num">10阅读</span>
                <img class="discuss-write" src="images/comment.png" />
            </div>
        </div>
    </div>

    <div class="p3-floor floor6">
        <div class="floor-con con6">
            <img src="images/floor6-name.png" class="floor-name">
            <div class="floor-text">
                <p><span class="theme">#晒冰箱换宵夜 </span> <span class="theme-con">囤了很多绝版胶卷，想给她拍照的。她走了，胶卷留下了，之前她不准我吃宵夜说会胖，而现在我想找个人陪我吃点什么都找不到了。</span></p>
            </div>
            <img src="images/f-pic6.jpg" class="floor-pic">
            <div class="floor-footer">
                <span class="distance">0.30km</span>
                <span class="discuss-num">2评论</span>
                <span class="read-num">10阅读</span>
                <img class="discuss-write" src="images/comment.png" />
            </div>
        </div>
    </div>

    <div class="p3-floor floor7">
        <img src="images/floor7-pic.png" class="p3-vicinity" />
    </div>

    <div class="floor-rule">
        <img src="images/p3-rule.jpg" class="p3-rule" />
    </div>

    <div class="newchoice">
        <img src="images/go-share.png" class="share banner-left">
        <img src="images/join.png" class="join banner-right">
    </div>
    <div class="bannerbox hide">
        <img src="images/p3-banner.jpg" class="p3-banner">
    </div>
</div>
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript">
var msg01H,msg02H,x;
$(function(){

    setTimeout(function(){
        
        $('.p1').removeClass('hide').siblings('.page').addClass('hide');
        msg01H=$('.msg01').height();
        msg02H=$('.msg02').height();
        p1Msg(msg01H,msg02H);

    }, 3000)

    $(".p1").on("touchstart", function() {
        $('.p2').removeClass('hide').siblings('.page').addClass('hide');
        var i = 0,j ;

        var bingxiangFn = function(){
            i=i+1;j=i-1;
            if(i<59){
                $('.p2animate').removeClass('bingxiang-'+j).addClass('bingxiang-'+i);
            }else if(i==59){
                $('.goOn').not('.jumpTip').show();
                clearInterval(bxInterval);
                $('.goOn').on('touchstart', function() {
                    var $this = $(this);
                    $this.addClass('touched');

                    if($this.hasClass('goOn01')){
                        sauceAnimate();
                    }else if($this.hasClass('goOn02')){
                        riceAnimate();
                    }else if($this.hasClass('goOn03')){
                        beerAnimate();
                    }else if($this.hasClass('jumpTip')){
                        $('.goOn').hide();
                        $('.p2animate').removeClass('rice-11 rice-19 sauce-8 sauce-17 beer-8 beer-16');
                        bxInterval=setInterval(bingxiangFn,150);//点击遮罩，继续动画
                        $('.p2-end').delay(1800).fadeIn();
                    }
                });
            }else if(59<i && i<72){//拿出的食物放回去
                $('.p2animate').removeClass('bingxiang-'+j).addClass('bingxiang-'+i);
            }else{
                clearInterval(bxInterval);
            }
        }

        var bxInterval = setInterval(bingxiangFn, 150)

        
    })

    $('.choice-close').on('touchstart', function() {
        returnBack();
        $('.msg-momo.shake').on('touchstart', function(event) {
            event.preventDefault();
            $('.p1').hide();
            $('.p3').removeClass('hide');
            $('.p3').animate({width:'100%',height:'100%',top:0,left:0},500);
            setTimeout(function(){
                $('.bannerbox').removeClass('hide');
            },350)

        });
    })

    /*$('.msg-momo.shake').on('touchstart', function(event) {
        event.preventDefault();
        $('.p1').hide();
        $('.p3').removeClass('hide');
        $('.p3').animate({width:'100%',height:'100%',top:0,left:0},500);
        setTimeout(function(){
            $('.bannerbox').removeClass('hide');
        },350)

    });*/

    

  
})
function p1Msg(msg01H,msg02H){
    setTimeout(function(){
        $('.msg-momo').removeClass('hide');
    }, 1000)
    setTimeout(function(){

        $(".msg02").css({height:0}).show().animate({
                height: msg02H
            }, 500, "linear")
    }, 2000)
    setTimeout(function(){
        $('.msg01').removeClass('hide').css({height:0}).animate({
                height: msg01H
            }, 500, "linear")

        $(".donghua").hide();
    }, 3500)
}

function returnBack(){
    $('.p2animate').removeClass('bingxiang-71');
    $('.p2-end').hide();

    var c=46,d;

    var returnFn = function(){
        c=c-1;d=c+1;
        if(c == 1){
            $('.p2animate').removeClass('bingxiang-'+d).addClass('bingxiang-'+c);
            $('.p2animate').removeClass('bingxiang-'+c);
            $('.p2').hide();
            $('.p1').show();$('.msg-momo').addClass('shake');
        }else if(c<47 && c>0){
            $('.p2animate').removeClass('bingxiang-'+d).addClass('bingxiang-'+c);
        }else{
            clearInterval(returnFn);
        }
    }
    var returnInterval = setInterval(returnFn,100)
}

function riceAnimate(){
    $('div.goOn').hide();
    var foo=$('.p2animate');
    foo.removeClass('bingxiang-58 sauce-8 sauce-17 beer-8 beer-16').addClass('rice-1');
    var a=0,b;
    

    var riceFn = function(){
        a=a+1;
        b=a-1;
        if(a<11){
            
            foo.removeClass('rice-'+b).addClass('rice-'+a);
        }else if(a==11){//这里是拿出食物
            $('.p2-text').fadeIn(200).addClass('rice-text').unbind().on('touchstart', function(event) {
                riceInterval=setInterval(riceFn,150),
                $(this).hide(),
                $('.goOn').not('.touched').delay(1000).fadeIn();
            });
            foo.removeClass('rice-'+b).addClass('rice-'+a);
            clearInterval(riceInterval);//如果不停止，那动画继续播放.这里停止了吧
        }else if(11<a && a<20){//拿出的食物放回去
            foo.removeClass('rice-'+b).addClass('rice-'+a);
        }else{
            clearInterval(riceInterval);
        }
        
    }
    var riceInterval = setInterval(riceFn, 150)
}


function beerAnimate(){
    $('.goOn').hide();
    $('.p2animate').removeClass('bingxiang-58 rice-11 rice-19 sauce-8 sauce-17');
    var a=0,b;

    var beerFn = function(){
        a=a+1;
        b=a-1;
        
        if(a==8){//这里是拿出食物
            $('.p2animate').removeClass('beer-'+b).addClass('beer-'+a);

            $('.p2-text').fadeIn(200).addClass('beer-text');

            $('.p2-text').unbind().on('touchstart', function(event) {
                beerInterval=setInterval(beerFn,200),
                $(this).delay(2000).hide(),
                $('.goOn').not('.touched').delay(1000).fadeIn();
            });
            clearInterval(beerInterval);//如果不停止，那动画继续播放.这里停止了吧
        }else if(a<8|| a<17 && a!=8){//拿出的食物放回去
            $('.p2animate').removeClass('beer-'+b).addClass('beer-'+a);
        }else{
            clearInterval(beerInterval);
        }
        
    }
    var beerInterval = setInterval(beerFn, 150)
}

function sauceAnimate(){
    $('.goOn').hide();
    var foo=$('.p2animate');
    foo.removeClass('bingxiang-58 rice-11 rice-19 beer-8 beer-16').addClass('sauce-1');
    var a=0,b;
    

    var sauceFn = function(){
        a=a+1;
        b=a-1;

        if(a==8){//这里是拿出食物
            $('.p2-text').fadeIn(200).addClass('sauce-text').unbind().on('touchstart', function(event) {
                sauceInterval=setInterval(sauceFn,200),
                $(this).hide(),
                $('.goOn').not('.touched').delay(1000).fadeIn();
            });
            foo.removeClass('sauce-'+b).addClass('sauce-'+a);
            clearInterval(sauceInterval);//如果不停止，那动画继续播放.这里停止了吧
        }else if(a<8 || a<18 && a!=8){//拿出的食物放回去
            foo.removeClass('sauce-'+b).addClass('sauce-'+a);
        }else{
            clearInterval(sauceInterval);
        }
        
    }
    var sauceInterval = setInterval(sauceFn, 180)
}
</script>
</body>
</html>